{"version":3,"sources":["sw.js","components/Organization.js","components/Rating.js","containers/MainPanel.js","containers/AboutPanel.js","containers/App.js","index.js"],"names":["registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","catch","error","isLocalhost","Boolean","window","location","hostname","match","Organization","props","react_default","a","createElement","es6","className","multiline","style","background","borderRadius","borderBottom","display","justifyContent","alignItems","padding","paddingLeft","paddingRight","info","width","src","border","position","left","top","document_default","fill","href","onClick","message","target","Rating","before","favorite_outline_default","rating","size","MainPanel","readQRCode","connect","send","checkUserLocation","_callee","url","resp","data","regenerator_default","wrap","_context","prev","next","alert","fetch","method","sent","json","stop","_this2","this","fetchedUser","organizations","go","id","title","photo_200","description","city","concat","first_name","last_name","camera_default","components_Rating","level","data-to","map","org","i","components_Organization","key","Component","osname","platform","AboutPanel","IOS","chevron_back_default","back_default","isWebView","vkConnect","App","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","e","setState","activePanel","currentTarget","dataset","to","getOrganizations","asyncToGenerator","mark","request","headers","Content-Type","Authorization","sheetsdata","abrupt","getRating","_callee2","_context2","setInterval","_ref3","_callee3","coord","_context3","hasOwnProperty","qr_data","split","trim","res","_x","apply","arguments","subscribe","detail","type","values","insets","activeView","src_containers_MainPanel","accessToken","token","containers_AboutPanel","ReactDOM","render","containers_App","document","getElementById","URL","process","origin","addEventListener","response","status","get","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.30627f32.chunk.js","sourcesContent":["// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nfunction registerValidSW(swUrl) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then((registration) => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing;\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the old content will have been purged and\n\t\t\t\t\t\t\t// the fresh content will have been added to the cache.\n\t\t\t\t\t\t\t// It's the perfect time to display a \"New content is\n\t\t\t\t\t\t\t// available; please refresh.\" message in your web app.\n\t\t\t\t\t\t\tconsole.log('New content is available; please refresh.');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error('Error during service worker registration:', error);\n\t\t});\n}\n\nfunction checkValidServiceWorker(swUrl) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl)\n\t\t.then((response) => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tif (\n\t\t\t\tresponse.status === 404 ||\n\t\t\t\tresponse.headers.get('content-type').indexOf('javascript') === -1\n\t\t\t) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl);\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log('No internet connection found. App is running in offline mode.');\n\t\t});\n}\n\nconst isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n\t// [::1] is the IPv6 localhost address.\n\twindow.location.hostname === '[::1]' ||\n\t// 127.0.0.1/8 is considered localhost for IPv4.\n\twindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));\n\nexport default function register() {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Lets check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t\t\t\t\t\t'worker. To learn more, visit https://goo.gl/SC7cgQ'\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not local host. Just register service worker\n\t\t\t\tregisterValidSW(swUrl);\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready.then((registration) => {\n\t\t\tregistration.unregister();\n\t\t});\n\t}\n}\n","import React from 'react';\r\nimport {Cell, Div, Link} from \"@vkontakte/vkui\";\r\nimport Icon28Document from '@vkontakte/icons/dist/28/document';\r\n\r\nconst Organization = props => (\r\n    <Cell className=\"listorg\" multiline>\r\n        <Div style={{background: '#eee', borderRadius: '7px', borderBottom: '1px solid #5181b8'}}>\r\n            <Div style={{display: 'flex', justifyContent: 'space-between',alignItems: 'stretch', background: '#eee', padding: '0'}}>\r\n                <Div style={{background: '#eee', paddingLeft: '0', paddingRight: '0'}}><b>{props.info[0]}</b></Div>\r\n                <Div><img style={{width: '90px'}} src={ props.info[2] } /></Div>\r\n            </Div>\r\n            <Div style={{background: '#4bb34b26',borderRadius: '4px',border: '1px solid #4eb94e', position: 'relative'}}>\r\n                <Div style={{position: 'absolute',left: '-14px',top: '7px', padding: '0'}}><Icon28Document fill={'#5181b8'} /></Div>\r\n                {props.info[6]}\r\n            </Div>\r\n            <Div style={{paddingLeft: '0', paddingRight: '0'}}>\r\n                <Link href=\"https://vk.com/im?media=&sel=-120490298\" onClick={props.message} target=\"_blank\">Откликнуться</Link>\r\n            </Div>\r\n        </Div>\r\n    </Cell>\r\n);\r\nexport default Organization;\r\n","import React from 'react';\r\nimport {Cell, Spinner} from \"@vkontakte/vkui\";\r\nimport Icon24FavoriteOutline from '@vkontakte/icons/dist/24/favorite_outline';\r\n\r\nconst Rating = props =>\r\n    <Cell before={<Icon24FavoriteOutline className=\"rating\" />}>\r\n        {props.rating === null ? <Spinner size=\"small\"/> : <span className=\"rating\">{props.rating}</span> }\r\n    </Cell>;\r\n\r\nexport default Rating;\r\n","import React, {Component} from 'react';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport {\r\n    Panel,\r\n    PanelHeader,\r\n    List,\r\n    Button,\r\n    Group,\r\n    ListItem,\r\n    Avatar,\r\n    Cell,\r\n    Separator, Div\r\n} from '@vkontakte/vkui';\r\nimport Icon24Camera from '@vkontakte/icons/dist/24/camera';\r\nimport Organization from \"../components/Organization\";\r\nimport Rating from \"../components/Rating\";\r\nimport connect from '@vkontakte/vkui-connect-promise';\r\nimport './MainPanel.css';\r\n\r\nclass MainPanel extends Component {\r\n\r\n    componentDidMount() {\r\n    }\r\n\r\n    render() {\r\n        const fetchedUser = this.props.fetchedUser;\r\n        const organizations = this.props.organizations;\r\n        const rating = this.props.rating;\r\n        const go = this.props.go;\r\n\r\n        return (\r\n            <Panel id={this.props.id}>\r\n                <PanelHeader>\r\n\r\n                </PanelHeader>\r\n\r\n                {fetchedUser &&\r\n                <Group title=\"\">\r\n                    <ListItem\r\n                        before={fetchedUser.photo_200 ? <Avatar src={fetchedUser.photo_200}/> : null}\r\n                        description={fetchedUser.city && fetchedUser.city.title ? `${fetchedUser.city.title}` : ''}\r\n                    >\r\n                        {`${fetchedUser.first_name} ${fetchedUser.last_name}`}\r\n                    </ListItem>\r\n                </Group>}\r\n\r\n                {fetchedUser && <Group>\r\n                    <Cell><Button before={<Icon24Camera/>} size=\"l\" onClick={() => this.readQRCode()}>Считать QR-code</Button></Cell>\r\n                    <Separator/>\r\n                    <Rating rating={rating} />\r\n                </Group>}\r\n\r\n                <Group>\r\n                    <Div>\r\n                        <Button size=\"xl\" level=\"2\" onClick={go} data-to=\"aboutPanel\">\r\n                            Туториал\r\n                        </Button>\r\n                        <Button onClick={() => this.checkUserLocation()}>sdfsdf</Button>\r\n                    </Div>\r\n                </Group>\r\n\r\n                <Group title=\"Организации\">\r\n                    <List>\r\n                    {organizations && organizations.map( (org,i) => (\r\n                        <Organization key={i} info={org}/>\r\n                    ))}\r\n                    </List>\r\n                </Group>\r\n            </Panel>\r\n        );\r\n    }\r\n\r\n    readQRCode = () => {\r\n        connect.send(\"VKWebAppOpenQR\", {});\r\n    };\r\n\r\n    checkUserLocation = async () => {\r\n        const url = `http://kritbots.ru/?ul=123&lat=123`;\r\n        alert(url);\r\n        const resp = await fetch(url, {\r\n            method: 'get',\r\n        });\r\n        const data = await resp.json();\r\n        console.log(data);\r\n    }\r\n}\r\n\r\nexport default MainPanel;\r\n","import React from 'react';\r\nimport { Group, HeaderButton, IOS, Panel, PanelHeader, platform} from \"@vkontakte/vkui\";\r\n\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\n\r\nconst osname = platform();\r\n\r\nconst AboutPanel = props => (\r\n    <Panel id={props.id}>\r\n        <PanelHeader\r\n            left={<HeaderButton onClick={props.go} data-to=\"mainPanel\">\r\n                {osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n            </HeaderButton>}\r\n        >\r\n            О нас\r\n        </PanelHeader>\r\n\r\n        <Group title=\"Наши цели\">\r\n\r\n        </Group>\r\n\r\n        <Group title=\"Как пользоватсья\">\r\n\r\n        </Group>\r\n\r\n        <Group title=\"Получай рейтинг\">\r\n\r\n        </Group>\r\n    </Panel>\r\n);\r\n\r\nexport default AboutPanel;\r\n","import React, {Component} from 'react';\r\nimport { ConfigProvider, Root, View } from '@vkontakte/vkui';\r\nimport vkConnect from '@vkontakte/vk-connect';\r\nimport MainPanel from './MainPanel';\r\nimport AboutPanel from \"./AboutPanel\";\r\nimport connect from '@vkontakte/vkui-connect-promise';\r\n\r\nconst isWebView = vkConnect.isWebView();\r\n\r\nclass App extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            activePanel: 'mainPanel',\r\n            fetchedUser: null,\r\n            rating: null,\r\n            organizations: null\r\n        };\r\n    }\r\n\r\n    componentWillMount() {\r\n        connect.subscribe((e) => {\r\n            switch (e.detail.type) {\r\n                case 'VKWebAppGetUserInfoResult':\r\n                    this.setState({ fetchedUser: e.detail.data });\r\n                    break;\r\n                case 'VKWebAppOpenQRResult':\r\n                    this.checkUserLocation(e.detail.data);\r\n                    break;\r\n                case 'VKWebAppOpenQRFailed':\r\n                    break;\r\n                default:\r\n                    console.log(e.detail.type);\r\n            }\r\n        });\r\n\r\n        connect.send(\"VKWebAppInit\", {});\r\n        connect.send('VKWebAppGetUserInfo', {}).then(data => {\r\n            this.getRating();\r\n        });\r\n\r\n        this.getOrganizations().then(res => {\r\n            this.setState({\r\n                organizations: res.values\r\n            })\r\n        });\r\n    }\r\n\r\n    go = (e) => {\r\n        this.setState({ activePanel: e.currentTarget.dataset.to })\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <ConfigProvider insets={this.props.insets} isWebView={isWebView}>\r\n                <Root activeView=\"mainView\">\r\n                    <View id=\"mainView\"\r\n                          activePanel={this.state.activePanel}>\r\n                        <MainPanel\r\n                            fetchedUser={this.state.fetchedUser}\r\n                            id=\"mainPanel\"\r\n                            accessToken={this.props.accessToken}\r\n                            go={this.go}\r\n                            token={this.state.token}\r\n                            organizations={this.state.organizations}\r\n                            rating={this.state.rating}\r\n                        />\r\n                        <AboutPanel\r\n                            id=\"aboutPanel\"\r\n                            go={this.go}/>\r\n                    </View>\r\n                </Root>\r\n            </ConfigProvider>\r\n        );\r\n    }\r\n\r\n    getOrganizations = async () => {\r\n        const request = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/1X848YaAiDmhD05BkYf-s7Up__I36zrdSBqRKxdBGrFI/values/A2:G`,\r\n            {\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    Authorization: \"Bearer ya29.GluCB_EwfUueFRaPMKUXKJc8dCyGn4SYyC1dCSOuOyvsMMiqfnecP-qLzuW5kOPab7-ynE98N-KEKRitd0yqMQRSpIXlfBWOn5UBrj4vG_0X8oaTyhy1G-n9MNi1\"\r\n                }\r\n            });\r\n        this.sheetsdata = await request.json();\r\n        console.log(this.sheetsdata);\r\n        return this.sheetsdata;\r\n    };\r\n\r\n    getRating = async () => {\r\n        setInterval(() => {\r\n            this.setState({\r\n                rating: 3600\r\n            })\r\n        }, 4000);\r\n        const request = await fetch('');\r\n    };\r\n\r\n    checkUserLocation = async data => {\r\n        if (data.hasOwnProperty('qr_data')) {\r\n            const coord = data.qr_data.split(',');\r\n            const url = `https://kritbots.ru/${coord[0].trim()}/${coord[1].trim()}`;\r\n            alert(url);\r\n            await fetch(url).then(res => {\r\n                console.log(res);\r\n                // if (res === 'OK') {\r\n                //\r\n                // }\r\n            })\r\n        } else {\r\n\r\n        }\r\n    }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport registerServiceWorker from './sw';\nimport App from './containers/App';\n\nReactDOM.render(<App/>, document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}