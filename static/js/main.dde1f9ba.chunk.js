(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,a){},110:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),i=a.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(17),s=a.n(o),l=a(20),u=a(22),p=a(23),d=a(25),m=a(24),f=a(26),h=a(4),b=a(18),g=a.n(b),E=(a(108),a(40)),k=a.n(E),v=a(41),y=a.n(v),w=function(e){return r.a.createElement(h.c,{className:"listorg",multiline:!0},r.a.createElement(h.e,{style:{background:"#eee",borderRadius:"7px",borderBottom:"1px solid #5181b8"}},r.a.createElement(h.e,{style:{display:"flex",justifyContent:"space-between",alignItems:"stretch",background:"#eee",padding:"0"}},r.a.createElement(h.e,{style:{background:"#eee",paddingLeft:"0",paddingRight:"0"}},r.a.createElement("b",null,e.info[0])),r.a.createElement(h.e,null,r.a.createElement("img",{style:{width:"90px"},src:e.info[2]}))),r.a.createElement(h.e,{style:{background:"#4bb34b26",borderRadius:"4px",border:"1px solid #4eb94e",position:"relative"}},r.a.createElement(h.e,{style:{position:"absolute",left:"-14px",top:"7px",padding:"0"}},r.a.createElement(y.a,{fill:"#5181b8"})),e.info[6]),r.a.createElement(h.e,{style:{paddingLeft:"0",paddingRight:"0"}},r.a.createElement(h.i,{href:"https://vk.com/im?media=&sel=-120490298",onClick:e.message,target:"_blank"},"\u041e\u0442\u043a\u043b\u0438\u043a\u043d\u0443\u0442\u044c\u0441\u044f"))))},O=a(42),x=a.n(O),j=function(e){return r.a.createElement(h.c,{before:r.a.createElement(x.a,{className:"rating"})},null===e.rating?r.a.createElement(h.p,{size:"small"}):r.a.createElement("span",{className:"rating"},e.rating))},R=a(21),C=(a(109),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).readQRCode=function(){R.a.send("VKWebAppOpenQR",{})},a.checkUserLocation=Object(l.a)(s.a.mark(function e(){var t,a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="http://kritbots.ru/?ul=123&lat=123",alert(t),e.next=4,fetch(t,{method:"get"});case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,console.log(n);case 9:case"end":return e.stop()}},e)})),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.fetchedUser,a=this.props.organizations,n=this.props.rating,c=this.props.go;return r.a.createElement(h.l,{id:this.props.id},r.a.createElement(h.m,null),t&&r.a.createElement(h.f,{title:""},r.a.createElement(h.k,{before:t.photo_200?r.a.createElement(h.a,{src:t.photo_200}):null,description:t.city&&t.city.title?"".concat(t.city.title):""},"".concat(t.first_name," ").concat(t.last_name))),t&&r.a.createElement(h.f,null,r.a.createElement(h.c,null,r.a.createElement(h.b,{before:r.a.createElement(k.a,null),size:"l",onClick:function(){return e.readQRCode()}},"\u0421\u0447\u0438\u0442\u0430\u0442\u044c QR-code")),r.a.createElement(h.o,null),r.a.createElement(j,{rating:n})),r.a.createElement(h.f,null,r.a.createElement(h.e,null,r.a.createElement(h.b,{size:"xl",level:"2",onClick:c,"data-to":"aboutPanel"},"\u0422\u0443\u0442\u043e\u0440\u0438\u0430\u043b"),r.a.createElement(h.b,{onClick:function(){return e.checkUserLocation()}},"sdfsdf"))),r.a.createElement(h.f,{title:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438"},r.a.createElement(h.j,null,a&&a.map(function(e,t){return r.a.createElement(w,{key:t,info:e})}))))}}]),t}(n.Component)),U=a(43),z=a.n(U),P=a(44),_=a.n(P),B=Object(h.r)(),K=function(e){return r.a.createElement(h.l,{id:e.id},r.a.createElement(h.m,{left:r.a.createElement(h.g,{onClick:e.go,"data-to":"mainPanel"},B===h.h?r.a.createElement(z.a,null):r.a.createElement(_.a,null))},"\u041e \u043d\u0430\u0441"),r.a.createElement(h.f,{title:"\u041d\u0430\u0448\u0438 \u0446\u0435\u043b\u0438"}),r.a.createElement(h.f,{title:"\u041a\u0430\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0441\u044c\u044f"}),r.a.createElement(h.f,{title:"\u041f\u043e\u043b\u0443\u0447\u0430\u0439 \u0440\u0435\u0439\u0442\u0438\u043d\u0433"}))},V=g.a.isWebView(),W=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).go=function(e){a.setState({activePanel:e.currentTarget.dataset.to})},a.getOrganizations=Object(l.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://sheets.googleapis.com/v4/spreadsheets/1X848YaAiDmhD05BkYf-s7Up__I36zrdSBqRKxdBGrFI/values/A2:G",{headers:{"Content-Type":"application/json",Authorization:"Bearer ya29.GluCB_EwfUueFRaPMKUXKJc8dCyGn4SYyC1dCSOuOyvsMMiqfnecP-qLzuW5kOPab7-ynE98N-KEKRitd0yqMQRSpIXlfBWOn5UBrj4vG_0X8oaTyhy1G-n9MNi1"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return a.sheetsdata=e.sent,console.log(a.sheetsdata),e.abrupt("return",a.sheetsdata);case 8:case"end":return e.stop()}},e)})),a.getRating=Object(l.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return setInterval(function(){a.setState({rating:3600})},4e3),e.next=3,fetch("");case 3:e.sent;case 4:case"end":return e.stop()}},e)})),a.checkUserLocation=function(){var e=Object(l.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.hasOwnProperty("qr_data")){e.next=8;break}return a=t.qr_data.split(","),n="https://kritbots.ru/".concat(a[0].trim(),"/").concat(a[1].trim()),alert(n),e.next=6,fetch(n).then(function(e){console.log(e)});case 6:e.next=8;break;case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={activePanel:"mainPanel",fetchedUser:null,rating:null,organizations:null},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this;R.a.subscribe(function(t){switch(t.detail.type){case"VKWebAppGetUserInfoResult":e.setState({fetchedUser:t.detail.data});break;case"VKWebAppOpenQRResult":e.checkUserLocation(t.detail.data);break;case"VKWebAppOpenQRFailed":break;default:console.log(t.detail.type)}}),R.a.send("VKWebAppGetUserInfo",{}).then(function(t){e.getRating()}),this.getOrganizations().then(function(t){e.setState({organizations:t.values})})}},{key:"render",value:function(){return r.a.createElement(h.d,{insets:this.props.insets,isWebView:V},r.a.createElement(h.n,{activeView:"mainView"},r.a.createElement(h.q,{id:"mainView",activePanel:this.state.activePanel},r.a.createElement(C,{fetchedUser:this.state.fetchedUser,id:"mainPanel",accessToken:this.props.accessToken,go:this.go,token:this.state.token,organizations:this.state.organizations,rating:this.state.rating}),r.a.createElement(K,{id:"aboutPanel",go:this.go}))))}}]),t}(n.Component);i.a.render(r.a.createElement(W,null),document.getElementById("root"))},96:function(e,t,a){e.exports=a(110)}},[[96,1,2]]]);
//# sourceMappingURL=main.dde1f9ba.chunk.js.map